(this.webpackJsonpchat_app=this.webpackJsonpchat_app||[]).push([[0],{287:function(e,t,n){},288:function(e,t,n){},289:function(e,t,n){},388:function(e,t,n){},389:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n(0),c=n.n(a),i=n(17),s=n.n(i),o=n(13),u=n(436),d=n(393),l=n(8),f=n(437),j=Object(l.a)((function(e){return{badge:{backgroundColor:"#44b700",color:"#44b700",boxShadow:"0 0 0 2px ".concat(e.palette.background.paper)},"@keyframes ripple":{"0%":{transform:"scale(.8)",opacity:1},"100%":{transform:"scale(2.4)",opacity:0}}}}))(u.a),p=Object(f.a)((function(e){return{root:{display:"flex","& > *":{margin:e.spacing(1)}}}}));function b(e){var t=e.name,n=e.picture,a=e.online,c=e.sizeInPixel,i=p(),s={width:"".concat(c,"px"),height:"".concat(c,"px")},o=Object(r.jsx)(d.a,{style:s,alt:t,src:n});return Object(r.jsx)("div",{className:i.root,children:a?Object(r.jsx)(j,{overlap:"circle",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot",children:o}):o})}var m,O=n(445),h=n(446),v=n(68),x=n(461),g=n(466),y=n(441),w=n(202),C=n.n(w),_=n(201),S=n.n(_),F={mainAppBar:"#main-app-bar"},k=n(23),q=n(30),I=n(5),R=n(29),U=n(6),N=n.n(U),T=n(9),B=n(18),M=n(22),A=n.n(M),E="https://pa-chat.glitch.me",L="".concat(E,"/user"),D={findByUsername:function(){var e=Object(T.a)(N.a.mark((function e(t){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.get("".concat(L,"/getUserByUsername"),{params:{username:t}});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),findByUsernameAndPassword:function(){var e=Object(T.a)(N.a.mark((function e(t,n){var r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.post("".concat(L,"/getUserByUsernameAndPassword"),{username:t,password:n});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),createAccount:function(){var e=Object(T.a)(N.a.mark((function e(t,n){var r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.post("".concat(L,"/createAccount"),{username:t,password:n});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),findAllFriendsByUsername:function(){var e=Object(T.a)(N.a.mark((function e(t){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.get("".concat(L,"/getFriendsByUsername"),{params:{username:t}});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),findSentRequestFriendById:function(){var e=Object(T.a)(N.a.mark((function e(t){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.get("".concat(L,"/getSentRequestFriendById"),{params:{id:t}});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),findStrangerByUsername:function(){var e=Object(T.a)(N.a.mark((function e(t){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.get("".concat(L,"/getStrangerByUsername"),{params:{username:t}});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),sentFriendRequest:function(){var e=Object(T.a)(N.a.mark((function e(t,n){var r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.post("".concat(L,"/sentFriendRequest"),{id:t,friendId:n});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),unfriend:function(){var e=Object(T.a)(N.a.mark((function e(t,n){var r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.post("".concat(L,"/unfriend"),{id:t,friendId:n});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),cancelFriendRequest:function(){var e=Object(T.a)(N.a.mark((function e(t,n){var r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.post("".concat(L,"/cancelFriendRequest"),{id:t,friendId:n});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),deleteFriendRequest:function(){var e=Object(T.a)(N.a.mark((function e(t,n){var r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.post("".concat(L,"/deleteFriendRequest"),{id:t,friendId:n});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),confirmFriendRequest:function(){var e=Object(T.a)(N.a.mark((function e(t,n){var r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.post("".concat(L,"/confirmFriendRequest"),{id:t,friendId:n});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),findUsersByIds:function(){var e=Object(T.a)(N.a.mark((function e(t){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.post("".concat(L,"/getUsersByIds"),{ids:t});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),findReceivers:function(){var e=Object(T.a)(N.a.mark((function e(t,n){var r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.post("".concat(L,"/getReceivers"),{username:t,exceptIds:n});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),findFriends:function(){var e=Object(T.a)(N.a.mark((function e(t,n){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},P={ucFirst:function(e){if(e)return e.slice(0,1).toUpperCase()+e.slice(1)},titleCase:function(e){var t=this;if(e){var n=(e=e.trim()).split(" ");return(n.length>1?n.reduce((function(e){return t.ucFirst(e)+" "})):this.ucFirst(n[0])).trim()}},sleep:function(e){return new Promise((function(t){return setTimeout((function(){t()}),e)}))},isFn:function(e){return"function"===typeof e},format:function(e){for(var t=e,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];if(e&&r.length>0)for(var c in r)t=t.replace("{".concat(c,"}"),r[c]);return t},getArrayOfFieldValue:function(e,t,n){return e.map((function(e){return"string"===n?e[t].toString():e[t]}))},arrayDiff:function(e,t){var n,r,a=[];return e.length>t.length?(n=e,r=t):(n=t,r=e),n.forEach((function(e){-1===r.indexOf(e)&&a.push(e)})),a}},z=n(142),W={getUTCNow:function(){var e=new Date,t=e.getTime(),n=e.getTimezoneOffset();return t-(n*=6e4)},getCurrentTimeByUTCTime:function(e){var t=(new Date).getTimezoneOffset();return e+(t*=6e4)},getMessageTimeString:function(e){var t=new Date(e),n=new Date;return n.getFullYear()===t.getFullYear()&&n.getMonth()===t.getMonth()&&n.getDate()===t.getDate()?z(e,"HH:MM"):z(e,"dd/mm/yyyy HH:MM")}},H=n(197),V=Object(H.io)(E,{"force new connection":!0,reconnectionAttempts:"Infinity",timeout:1e4,transports:["websocket"]}),G={updateUser:"update-user",signIn:"sign-in",signOut:"sign-out",getOnlineUsers:"get-online-users",typing:"typing",stopTyping:"stop-typing",sendMessage:"send-message",receiveMessage:"receive-message",newMessageNotification:"new-message-notification",onlineUsers:"online-users",newOnlineUser:"new-online-user",onlineUserLeft:"online-user-left",joinUsersToConversation:"join-users-to-conversation",joinRoom:"join-room",leaveRoom:"leave-room",acceptFriend:"accept-friend",addFriend:"add-friend",unfriend:"unfriend",cancelFriendRequest:"cancel-friend-request",deleteFriendRequest:"delete-friend-request",friendRequestCanceled:"friend-request-canceled",friendRejected:"friend-rejected",friendAccepted:"friend-accepted",friendRequested:"friend-requested",friendUnfriend:"friend-unfriend"},J={emitSignIn:function(e){V.emit(G.signIn,{user:e})},emitSignOut:function(e){V.emit(G.signOut,{user:e})},emitGetOnlineUsers:function(){V.emit(G.getOnlineUsers)},emitUpdateUserById:function(e){V.emit(G.updateUser,{id:e})},emitSendMessage:function(e,t,n){V.emit(G.sendMessage,{user:e,message:t,conversationId:n})},emitTyping:function(e,t){V.emit(G.typing,{user:e,conversationId:t})},emitStopTyping:function(e,t){V.emit(G.stopTyping,{username:e,conversationId:t})},emitJoinUsersToConversation:function(e,t){V.emit(G.joinUsersToConversation,{ids:e,conversationId:t})},emitJoinRoom:function(e){V.emit(G.joinRoom,{roomName:e})},emitLeaveRoom:function(e){V.emit(G.leaveRoom,{roomName:e})},emitAddFriend:function(e,t){V.emit(G.addFriend,{user:e,friendId:t})},emitAcceptFriend:function(e,t){V.emit(G.acceptFriend,{user:e,friendId:t})},emitUnfriend:function(e,t){V.emit(G.unfriend,{user:e,friendId:t})},emitCancelFriendRequest:function(e,t){V.emit(G.cancelFriendRequest,{user:e,friendId:t})},emitDeleteFriendRequest:function(e,t){V.emit(G.deleteFriendRequest,{user:e,friendId:t})},onNewOnlineUser:function(e){V.on(G.newOnlineUser,e)},onOnlineUserLeft:function(e){V.on(G.onlineUserLeft,e)},onUpdateUser:function(e){V.on(G.updateUser,e)},onReceiveMessage:function(e){V.on(G.receiveMessage,e)},onOnlineUsers:function(e){V.on(G.onlineUsers,e)},onTyping:function(e){V.on(G.typing,e)},onStopTyping:function(e){V.on(G.stopTyping,e)},onNewMessageNotification:function(e){V.on(G.newMessageNotification,e)},onFriendAccepted:function(e){V.on(G.friendAccepted,e)},onFriendRequested:function(e){V.on(G.friendRequested,e)},onFriendUnFriend:function(e){V.on(G.friendUnfriend,e)},onFriendRequestCanceled:function(e){V.on(G.friendRequestCanceled,e)},onFriendRejected:function(e){V.on(G.friendRejected,e)},off:function(e){V.off(e)}},Y=Object(B.b)("auth/login",function(){var e=Object(T.a)(N.a.mark((function e(t){var n,r,a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,r=t.password,e.next=3,D.findByUsernameAndPassword(n,r);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),K=Object(B.b)("auth/sentFriendRequest",function(){var e=Object(T.a)(N.a.mark((function e(t){var n,r,a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,r=t.friendId,e.next=3,D.sentFriendRequest(n,r);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Z=function(e,t){J.emitSignIn(t.payload),e.user=t.payload,e.isLogged=!0},$=Object(B.d)({name:"auth",initialState:{isLogged:!1,user:null,status:"idle",error:null},reducers:{login:function(e,t){Z(e,t)},updateUser:function(e,t){e.user=t.payload},signOut:function(e){J.emitSignOut(e.user),e.user=null,e.isLogged=!1}},extraReducers:(m={},Object(R.a)(m,Y.pending,(function(e,t){e.status="loading"})),Object(R.a)(m,Y.fulfilled,(function(e,t){var n=t.payload,r=n.payload;"succeeded"===n.status?(Z(e,{payload:r}),e.error=null):e.error="not found",e.status="succeeded"})),Object(R.a)(m,Y.rejected,(function(e,t){e.error=t.error.message,e.status="failed"})),Object(R.a)(m,K.fulfilled,(function(e,t){})),m)}),Q=function(e){return e.auth.error},X=function(e){return e.auth.status},ee=function(e){return e.auth.isLogged},te=function(e){return e.auth.user},ne=function(e){return e.auth.user._id},re=$.actions,ae=re.signOut,ce=re.login,ie=re.updateUser,se=$.reducer,oe=n(463),ue=n(15),de=n(438),le=n(199),fe=n.n(le),je=n(198),pe=n.n(je),be=Object(B.d)({name:"theme",initialState:{type:"light"},reducers:{switchThemeType:function(e){e.type="light"===e.type?"dark":"light"}}}),me=be.actions.switchThemeType,Oe=be.reducer;function he(){var e=Object(I.c)((function(e){return e.theme})),t=Object(I.b)(),n=Object(oe.a)(["theme"]),c=Object(o.a)(n,3),i=c[0],s=c[1];c[2];Object(a.useEffect)((function(){i.theme&&i.theme.type&&i.theme.type!==e.type&&t(me())}));return Object(r.jsx)(de.a,{"aria-label":"Day / night toggle",onClick:function(){var n=Object(ue.a)(Object(ue.a)({},e),{},{type:"light"===e.type?"dark":"light"});s("theme",JSON.stringify(n)),t(me())},color:"inherit",children:"light"===e.type?Object(r.jsx)(pe.a,{}):Object(r.jsx)(fe.a,{})})}var ve=n(67);Object(l.a)((function(e){return{badge:{right:-3,top:5,border:"1px solid white",padding:"0 4px"}}}))(u.a);var xe=n(112),ge=n.n(xe),ye=n(111),we=n.n(ye),Ce=n(470);function _e(e){var t=e.children,n=Object(ve.a)(e,["children"]);return Object(r.jsx)(q.b,Object(ue.a)(Object(ue.a)({},n),{},{style:{all:"unset"},children:t}))}function Se(){Object(k.g)();return Object(r.jsxs)(c.a.Fragment,{children:[Object(r.jsx)(_e,{to:"/chat/new",children:Object(r.jsx)(Ce.a,{title:"Chat",children:Object(r.jsx)(de.a,{color:"inherit",children:Object(r.jsx)(we.a,{})})})}),Object(r.jsx)(_e,{to:"/friends",children:Object(r.jsx)(Ce.a,{title:"Friends",children:Object(r.jsx)(de.a,{color:"inherit",children:Object(r.jsx)(ge.a,{})})})})]})}var Fe="loggedUser",ke=n(4),qe=n(467),Ie=n(442),Re=n(391),Ue=n(443),Ne=n(444),Te=Object(f.a)({list:{width:250},fullList:{width:"auto"}});function Be(e){var t=e.icon,n=Te(),a=c.a.useState({top:!1,left:!1,bottom:!1,right:!1}),i=Object(o.a)(a,2),s=i[0],u=i[1],d=function(e,t){return function(n){("keydown"!==n.type||"Tab"!==n.key&&"Shift"!==n.key)&&u(Object(ue.a)(Object(ue.a)({},s),{},Object(R.a)({},e,t)))}},l="left";return Object(r.jsxs)(c.a.Fragment,{children:[Object(r.jsx)(de.a,{color:"inherit",onClick:d(l,!0),children:t}),Object(r.jsx)(qe.a,{anchor:l,open:s.left,onClose:d(l,!1),children:function(e){return Object(r.jsx)("div",{className:Object(ke.a)(n.list,Object(R.a)({},n.fullList,"top"===e||"bottom"===e)),role:"presentation",onClick:d(e,!1),onKeyDown:d(e,!1),children:Object(r.jsxs)(Ie.a,{children:[Object(r.jsx)(_e,{to:"/friends",children:Object(r.jsxs)(Re.a,{button:!0,children:[Object(r.jsx)(Ue.a,{children:Object(r.jsx)(ge.a,{})}),Object(r.jsx)(Ne.a,{primary:"Friends"})]})}),Object(r.jsx)(_e,{to:"/chat",children:Object(r.jsxs)(Re.a,{button:!0,children:[Object(r.jsx)(Ue.a,{children:Object(r.jsx)(we.a,{})}),Object(r.jsx)(Ne.a,{primary:"Chat"})]})})]})})}(l)})]},l)}function Me(e){var t=Object(oe.a)(Fe),n=Object(o.a)(t,3),a=(n[0],n[1],n[2]),c=Object(I.c)(te),i=Object(I.b)(),s=Object(I.c)(ee),u=Object(I.c)(X),d=Object(k.h)().pathname,l=Object(k.g)(),f=Object(r.jsxs)(x.a,{display:"flex",alignItems:"center",justifyContent:"flex-end",flexGrow:1,children:[Object(r.jsx)(g.a,{smDown:!0,children:Object(r.jsx)(x.a,{mr:4,children:s?Object(r.jsx)(Se,{}):null})}),Object(r.jsx)(he,{}),s?Object(r.jsx)(b,{name:c.name,single:c.single,picture:c.picture}):null,Object(r.jsx)(y.a,{disabled:"/login"===d,startIcon:s?null:Object(r.jsx)(S.a,{}),color:"inherit",onClick:function(){a(Fe),i(ae()),l.push("/")},children:Object(r.jsx)(v.a,{children:s?"Sign out":"Sign in"})})]});return Object(r.jsx)(O.a,{className:"header",position:"static",color:"primary",id:F.mainAppBar,children:Object(r.jsxs)(h.a,{children:[Object(r.jsx)(g.a,{mdUp:!0,children:Object(r.jsx)(Be,{icon:Object(r.jsx)(C.a,{}),children:" "})}),Object(r.jsx)(v.a,{variant:"h6",children:Object(r.jsx)(q.b,{to:"/chat",color:"inherit",style:{color:"white",textDecoration:"none"},children:"Messenger"})}),"loading"!==u?f:null]})})}var Ae=n(450),Ee=(n(447),n(460));var Le=n(469),De="#F0F2F5",Pe=Object(f.a)((function(e){return Object(Le.a)({table:{minWidth:650},chatSection:{width:"100%",height:"400px",overflow:"auto"},headBG:{backgroundColor:"#e0e0e0"},borderRight500:{borderRight:"1px solid #e0e0e0"},borderLeft500:{borderLeft:"1px solid #e0e0e0"},messageArea:{height:"70vh",overflowY:"auto"},RoundLightGrayInputStyle:{paddingLeft:"10px",paddingRight:"10px",backgroundColor:De,borderRadius:"50px"},buttonStyle:{textTransform:"none"},flexCenterVerticalStyle:{display:"flex",alignItems:"center"},flexCenterStyle:{display:"flex",alignItems:"center",justifyContent:"center"},defaultContainerPaddingStyle:{root:{"& > *":{padding:e.spacing(2)}}}})})),ze=n(448);function We(e){var t=e.items,n=e.max,a=void 0===n?2:n,c=t.slice(0,a).map((function(e,t){return Object(r.jsx)(d.a,{alt:e.name,src:e.src},t)}));return Object(r.jsx)(ze.a,{max:a,spacing:"small",children:c})}var He=n(449),Ve="".concat(E,"/conversation"),Ge={findConversationById:function(){var e=Object(T.a)(N.a.mark((function e(t){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.get("".concat(Ve,"/getConversationById"),{params:{id:t}});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),findConversationByMemberIds:function(){var e=Object(T.a)(N.a.mark((function e(t){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.post("".concat(Ve,"/getConversationByMemberIds"),{ids:t});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),findSidebarConversationById:function(){var e=Object(T.a)(N.a.mark((function e(t){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.get("".concat(Ve,"/getSidebarConversationById"),{params:{id:t}});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),listConversationsForListDisplay:function(){var e=Object(T.a)(N.a.mark((function e(t){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.get("".concat(Ve,"/listConversationsForListDisplay"),{params:{id:t}});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),findConversationInfoByUserIdsOrCreateIfNotExist:function(){var e=Object(T.a)(N.a.mark((function e(t){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.post("".concat(Ve,"/getConversationInfoByUserIdsOrCreateIfNotExist"),{ids:t});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getHomeConversation:function(){var e=Object(T.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.get("".concat(Ve,"/home"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),createConversationWithMemberIds:function(){var e=Object(T.a)(N.a.mark((function e(t){var n,r,a=arguments;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:null,e.next=3,A.a.post("".concat(Ve,"/createConversationWithMemberIds"),{ids:t,messageParams:n});case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Je=Object(B.b)("chat/conversation",function(){var e=Object(T.a)(N.a.mark((function e(t){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ge.findConversationByMemberIds(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ye=Object(B.b)("chat/conversation",function(){var e=Object(T.a)(N.a.mark((function e(t){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ge.findConversationById(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ke=(Object(B.b)("chat/conversation",function(){var e=Object(T.a)(N.a.mark((function e(t){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ge.findConversationByUserIdsOrCreateIfNotExist(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(B.b)("chat/conversation",Object(T.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ge.getHomeConversation();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))),Object(B.d)({name:"chat",initialState:{conversation:{},sidebarConversations:[],status:"idle",error:null},reducers:{appendMessage:function(e,t){e.conversation.messages.push(t.payload)},reset:function(e,t){e.conversation={},e.status="idle",e.error=null}},extraReducers:{"chat/conversation/pending":function(e,t){e.status="loading"},"chat/conversation/fulfilled":function(e,t){var n=t.payload,r=n.payload;"succeeded"===n.status?(e.conversation=r,e.error=null):e.error="not found",e.status="succeeded"},"chat/conversation/rejected":function(e,t){e.error=t.error.message,e.status="failed"}}})),Ze=function(e){return e.chat.status},$e=function(e){return e.chat.conversation},Qe=function(e){return e.chat.conversation.members},Xe=function(e){return e.chat.conversation._id},et=function(e){return e.chat.conversation.messages||[]},tt=Ke.actions,nt=tt.reset,rt=tt.appendMessage,at=Ke.reducer;function ct(e){var t=e.children,n=e.item,a=Object(ve.a)(e,["children","item"]),c=Object(k.g)(),i=Object(I.c)(te)||{},s=Object(I.c)(Qe),o=function(){var e=Object(T.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=function(){var e=Object(T.a)(N.a.mark((function e(){var t,r,a,s,o,u,d;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ge.findConversationInfoByUserIdsOrCreateIfNotExist([i._id,n._id]);case 2:t=e.sent,r=t.status,a=t.payload,"succeeded"===r&&(s=a.members,o=a.isNew,u=a._id,o&&J.emitJoinUsersToConversation(s,u),d=t.payload._id,c.push("/chat/t/".concat(d)));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s){e.next=6;break}return e.next=4,t();case 4:e.next=9;break;case 6:if(!(P.arrayDiff(s,[i._id,n._id]).length>0)){e.next=9;break}return e.next=9,t();case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)(x.a,Object(ue.a)(Object(ue.a)({},a),{},{onClick:o,children:[" ",t]}))}var it,st=Object(f.a)({truncateListItemStyle:{"& > p":{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}}),ot=function(e){var t=e.items;return t=t.map((function(e){return{name:e.username,src:e.picture}})),Object(r.jsx)(We,{items:t})};function ut(e){var t,n=e.item,a=e.online,c=e.icon,i=st(),s=Object(I.c)(te),o=Object(I.c)(Xe),u=n.members,l=u.filter((function(e){return e._id!==s._id})),f=null;if(t=2===u.length?l[0].username:"".concat(l[0].username," and ").concat(l.length-1," others"),n.lastMessage){var j=n.lastMessage?n.lastMessage.from._id===s._id?"you: ":l.length>1?"".concat(n.lastMessage.from.username,": "):null:null;f=null!==j?"".concat(j," ").concat(n.lastMessage.text):n.lastMessage.text}var p=l.reduce((function(e,t){return"".concat(e,", ").concat(t.username)}),"").replace(/^, /,"");return Object(r.jsx)(_e,{to:"/chat/t/".concat(n._id),children:Object(r.jsx)(Ce.a,{title:p,children:Object(r.jsxs)(Re.a,{button:!0,selected:o===n._id,children:[Object(r.jsx)(He.a,{style:{width:"90px",overflow:"hidden"},children:c?Object(r.jsxs)(d.a,{children:[" ",c," "]}):2===u.length?Object(r.jsx)(b,{online:a,name:t,single:!0,picture:l[0].picture}):Object(r.jsx)(ot,{items:l})}),Object(r.jsx)(g.a,{xsDown:!0,children:Object(r.jsx)(Ne.a,{className:i.truncateListItemStyle,primary:t,secondary:f})})]})})})}var dt=Object(B.b)("sidebarConversations/fetchConversations",function(){var e=Object(T.a)(N.a.mark((function e(t){var n,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,e.next=3,Ge.listConversationsForListDisplay(n);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),lt=Object(B.b)("sidebarConversations/fetchAndPrependConversationById",function(){var e=Object(T.a)(N.a.mark((function e(t){var n,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,e.next=3,Ge.findSidebarConversationById(n);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ft=Object(B.c)({selectId:function(e){return e._id},sortComparer:function(e,t){return-(e.lastMessage.time-t.lastMessage.time)}}),jt=ft.getInitialState({status:"idle",error:null}),pt=Object(B.d)({name:"sidebarConversations",initialState:jt,reducers:{updateLastMessage:function(e,t){var n=t.payload,r=n.id,a=n.message,c=e.entities[r];c?(c.lastMessage=a,ft.upsertOne(e,c)):lt({id:r})}},extraReducers:(it={},Object(R.a)(it,lt.fulfilled,(function(e,t){var n=t.payload,r=n.payload;"succeeded"===n.status&&ft.upsertOne(e,r)})),Object(R.a)(it,dt.pending,(function(e,t){e.status="loading"})),Object(R.a)(it,dt.fulfilled,(function(e,t){var n=t.payload,r=n.payload;"succeeded"===n.status?(ft.upsertMany(e,r),e.error=null):e.error="not found",e.status="succeeded"})),it)}),bt=ft.getSelectors((function(e){return e.sidebarConversations})),mt=bt.selectAll,Ot=(bt.selectById,bt.selectIds),ht=pt.actions.updateLastMessage,vt=pt.reducer;function xt(){Pe();var e=Object(I.b)(),t=Object(I.c)(mt),n=Object(I.c)(te),c=Object(I.c)(Ot),i=Object(I.c)(Xe);Object(a.useEffect)((function(){e(dt({id:n._id}))}),[]),Object(a.useEffect)((function(){var t=function(t){var n=t.message,r=t.conversationId;c.indexOf(r)>-1?e(ht({id:r,message:n})):e(lt({id:r}))};return J.onNewMessageNotification(t),function(){V.removeListener(G.newMessageNotification,t)}}),[i,c]);var s=t.map((function(e,t){return Object(r.jsx)(ut,{item:e},t)}));return Object(r.jsx)(Ie.a,{className:"left-sidebar custom-scrollbar",children:s})}var gt=n(213),yt={enabled:!1,receivers:[]},wt=Object(B.d)({name:"newChat",initialState:yt,reducers:{setEnabled:function(e,t){e.enabled=t.payload},removeReceiverById:function(e,t){e.receivers=e.receivers.filter((function(e){return e._id!==t.payload}))},appendReceiver:function(e,t){e.receivers.push(t.payload)},removeLastReceiver:function(e,t){e.receivers.length>0&&(e.receivers=e.receivers.slice(0,-1))},reset:function(e,t){e.enabled=yt.enabled,e.receivers=yt.receivers}}}),Ct=function(e){return e.newChat.receivers},_t=function(e){return e.newChat.enabled},St=function(e){return 1===e.newChat.receivers.length?e.newChat.receivers[0]:null},Ft=wt.actions,kt=Ft.removeReceiverById,qt=Ft.appendReceiver,It=Ft.removeLastReceiver,Rt=Ft.setEnabled,Ut=Ft.reset,Nt=wt.reducer;function Tt(){return Object(r.jsx)(v.a,{align:"center",className:"text-muted",children:"Loading..."})}function Bt(e){var t=e.notShowAvatar,n=e.ownMessage,a=e.time,c=e.user,i=e.message,s=t?null:Object(r.jsx)(b,{sizeInPixel:20,name:c.username,picture:c.picture}),o=n?"right":"left",u=n?"flex-end":"flex-start",d=n?"bottom-start":"bottom-end";return Object(r.jsx)(Re.a,{children:Object(r.jsxs)(x.a,{width:"100%",style:{display:"flex",justifyContent:u,alignItems:"flex-end"},children:[n?null:s,Object(r.jsx)(x.a,{className:"message ".concat(o,"-message ").concat(!n&&t?"ml-avatar":""),children:Object(r.jsx)(Ce.a,{title:W.getMessageTimeString(W.getCurrentTimeByUTCTime(a)),placement:d,children:Object(r.jsx)(Ne.a,{align:o,primary:i})})})]})},"1")}function Mt(e){var t,n=e.username,a=e.type,c=Object(r.jsx)(v.a,{component:"span",color:"primary",children:n});switch(a){case"welcome-current-user-notification":t="Welcome to the chat room.";break;case"welcome-other-user-notification":t=Object(r.jsxs)("span",{children:[c," has joined the chat."]});break;case"user-left-notification":t=Object(r.jsxs)("span",{children:[c," has left the chat."]});break;default:t=""}return Object(r.jsx)(v.a,{align:"center",className:"text-muted",children:t})}n(287);var At=Object(r.jsx)(c.a.Fragment,{children:Object(r.jsx)(x.a,{mt:4,children:Object(r.jsx)(v.a,{className:"text-muted",align:"center",children:"Let's start a conversation."})})});function Et(e){var t=e.messages,n=Object(I.c)(te),c=Object(I.c)(_t),i=t.map((function(e,a){if(e.from){var c=!1;if(a<t.length-1){var i=t[a+1];c="message"===i.type&&i.from.username===e.from.username}return Object(r.jsx)(Bt,{notShowAvatar:c,ownMessage:e.from.username===n.username,user:e.from,message:e.text,time:e.time},a)}return Object(r.jsx)(Mt,{username:e.user.username,type:e.type},a)}));return Object(a.useEffect)((function(){!function(){var e=document.getElementsByClassName("chat-box-messages-wrapper");e[0].scrollTop=e[0].scrollHeight}()}),[t]),Object(r.jsx)(Ie.a,{className:"chat-box-messages-wrapper custom-scrollbar",children:i.length>0?i:c?null:At})}var Lt,Dt=n(451),Pt=Object(B.d)({name:"notify",initialState:{message:"",type:"",open:!1,timeout:4e3},reducers:{setNotify:function(e,t){var n=t.payload,r=n.message,a=n.type,c=n.open,i=n.timeout;c&&(e.message=r||"",e.type=a||"",e.timeout=i||6e3),e.open=c||!1}}}),zt=function(e){return e.notify.open},Wt=function(e){return e.notify.message},Ht=function(e){return e.notify.type},Vt=function(e){return e.notify.timeout},Gt=Pt.actions.setNotify,Jt=Pt.reducer,Yt={invalid:"{0} invalid",fail:"Something went wrong",welcomeNewAccount:"Hello {0}, let's start a chat with your fiends!",PleaseTypeMessage:"Please type some message to send!",PleaseChooseReceiver:"Please choose receiver!",newMessage:"{0}: {1}",friendRequested:"{0} sent you a friend request.",unfriended:"{0} unfriended you.",friendAccepted:"{0} accepted your friend request."};function Kt(){var e=Object(a.useState)(""),t=Object(o.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(!1),s=Object(o.a)(i,2),u=s[0],d=s[1],l=Object(I.b)(),f=Object(k.g)(),j=Object(I.c)(te),p=Object(I.c)($e),b=Object(I.c)(Ct),m=Object(I.c)(_t),O=function(){J.emitSendMessage(j,n,p._id),c(""),m&&f.push("/chat/t/".concat(p._id))},h=function(){var e=Object(T.a)(N.a.mark((function e(){var t,r,a,i;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=P.getArrayOfFieldValue(b,"_id").concat(j._id),e.next=3,Ge.createConversationWithMemberIds(t);case 3:r=e.sent,a=r.status,i=r.payload,"succeeded"===a&&(J.emitJoinUsersToConversation(i.members,i._id),J.emitSendMessage(j,n,i._id),c(""),f.push("/chat/t/".concat(i._id)));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){u&&(J.emitStopTyping(j.username,p._id),d(!1))};return Object(r.jsx)("form",{onSubmit:function(e){!function(e){e.preventDefault(),""===n.trim()?l(Gt({message:Yt.PleaseTypeMessage,open:!0,timeout:2e3})):p._id?O():m&&b.length>0?h():l(Gt({message:Yt.PleaseChooseReceiver,open:!0,timeout:2e3}))}(e)},children:Object(r.jsxs)(Ae.a,{container:!0,children:[Object(r.jsx)(Ae.a,{item:!0,xs:10,md:11,children:Object(r.jsx)(Ee.a,{style:{padding:"0 8px"},autoFocus:!0,inputProps:{autoComplete:"off"},value:n,id:"outlined-basic-email",fullWidth:!0,onChange:function(e){c(e.target.value)},onKeyUp:function(e){13!==e.which?n.length>3&&(u||""===n.trim()||J.emitTyping(j,p._id),d(!0),clearTimeout(Lt),Lt=setTimeout((function(){v()}),2e3)):v()},onBlur:function(){v()}})}),Object(r.jsx)(Ae.a,{item:!0,xs:2,md:1,align:"center",children:Object(r.jsxs)(de.a,{color:"primary",type:"submit",children:[" ",Object(r.jsx)(Dt.a,{})," "]})})]})})}function Zt(e){var t=e.type;return Object(r.jsx)(gt.a,{style:{boxShadow:"none"},className:"sending-message-bar-wrapper",children:Object(r.jsx)(Kt,{type:t})})}function $t(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),n=t[0],c=t[1];Object(a.useEffect)((function(){return J.onTyping((function(e){c(n.concat(e.user))})),J.onStopTyping((function(e){c(n.filter((function(t){return t.username!==e.username})))})),function(){V.off(G.typing),V.off(G.stopTyping)}}));var i=n.map((function(e){return Object(r.jsx)("div",{children:Object(r.jsxs)("div",{style:{display:"flex",alignItems:"flex-start"},children:[Object(r.jsx)("span",{children:Object(r.jsx)(b,{name:e.username,picture:e.picture,children:" "})}),Object(r.jsx)("img",{className:"typing-icon",src:"".concat("/chat","/images/icons/typing-icon.gif"),alt:"typing"})]})},e._id)}));return Object(r.jsx)(gt.a,{elevation:0,style:{minWidth:"200px"},children:i.length>0?i:null})}function Qt(){var e=Object(I.c)(Ze),t=Object(I.c)(et),n=Object(I.c)($e),c=Object(I.b)(),i=Object(k.g)(),s=Object(I.c)(ne),o=Object(k.i)().conversationId,u=Object(I.c)(St)||{},d=Object(I.c)(_t);return Object(a.useEffect)((function(){d&&(u._id?c(Je(["".concat(s),"".concat(u._id)])):c(nt()))}),[u._id,d]),Object(a.useEffect)((function(){return"succeeded"===e&&(n._id?J.emitJoinRoom("".concat(n._id,"_current")):i.replace("/chat/new")),function(){n._id&&J.emitLeaveRoom("".concat(n._id,"_current"))}}),[e,n._id]),Object(a.useEffect)((function(){o&&c(Ye(o))}),[o]),Object(a.useEffect)((function(){return function(){c(nt())}}),[]),Object(a.useEffect)((function(){return J.onReceiveMessage((function(e){var t=e.conversationId,r=e.message;if(t===n._id){var a=Object(ue.a)({type:"message"},r);c(rt(a))}})),function(){J.off(G.receiveMessage)}}),[t,n._id]),Object(r.jsx)(x.a,{children:"loading"===e?Object(r.jsx)(Tt,{}):Object(r.jsx)(Et,{messages:t})})}var Xt,en=n(464),tn=n(203),nn=n.n(tn);n(288),n(289);function rn(e){var t=e.items,n=void 0===t?[]:t,a=e.onItemClick;return Object(r.jsx)(Ie.a,{className:"suggestion-receiver-list",dense:!1,children:function(e){return e.map((function(e){return Object(r.jsxs)(Re.a,{button:!0,onClick:function(){a(e)},children:[Object(r.jsx)(He.a,{children:Object(r.jsx)(d.a,{src:e.picture,children:" "})}),Object(r.jsx)(Ne.a,{primary:e.username,secondary:null})]},e._id)}))}(n)})}var an=function(e){var t=e.items,n=e.onCloseClick;return t.map((function(e){return Object(r.jsxs)(en.a,{className:"selected-receiver",severity:"info",icon:!1,action:Object(r.jsx)(de.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){n(e)},children:Object(r.jsx)(nn.a,{fontSize:"inherit"})}),children:[" ",e.username]},e._id)}))};function cn(e){var t=e.onFriendIdSelected,n=Object(I.b)(),c=Object(a.useState)(!0),i=Object(o.a)(c,2),s=i[0],u=i[1],d=Object(a.useState)([]),l=Object(o.a)(d,2),f=l[0],j=l[1],p=Object(a.useState)(""),b=Object(o.a)(p,2),m=b[0],O=b[1],h=Object(a.useState)(""),g=Object(o.a)(h,2),y=g[0],w=g[1],C=Object(a.useRef)(null),_=Object(I.c)(ne),S=Object(I.c)(Ct);Object(a.useEffect)((function(){u(!0);var e=function(){var e=Object(T.a)(N.a.mark((function e(){var t,n,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.findReceivers(y,P.getArrayOfFieldValue(S,"_id").concat(_));case 2:t=e.sent,n=t.status,r=t.payload,"succeeded"===n&&s&&j(r);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return""!==y.trim()&&e(),function(){u(!1)}}),[y,S,_]),Object(a.useEffect)((function(){1===S.length?t(S[0]._id):t(null)}),[S]);var F=function(e,t,r){8===e.which&&""===t.trim()&&""===r.trim()&&n(It())};return Object(r.jsxs)(x.a,{className:"receiver-wrapper",children:[Object(r.jsx)(v.a,{className:"receiver-label",children:"To: "}),Object(r.jsxs)(x.a,{className:"receiver-container",display:"inline-block",children:[Object(r.jsx)(an,{items:S,onCloseClick:function(e){n(kt(e._id))}}),Object(r.jsxs)(x.a,{className:"receiver-input-container",children:[Object(r.jsx)(Ee.a,{placeholder:"Receiver",ref:C,className:"receiver-input",autoFocus:!0,onKeyUp:function(e){var t=e.target.value;F(e,m,t)},onChange:function(e){var t=e.target.value;O(t),clearTimeout(Xt),Xt=setTimeout((function(){w(t)}),500)},onBlur:function(e){var t=e.target.value;F(e,m,t)},value:m}),f.length>0?Object(r.jsx)(rn,{items:f,onItemClick:function(e){n(qt(e)),O(""),w(""),j([]),C.current.querySelector("input").focus()}}):null]})]})]})}function sn(){var e=Object(a.useState)(null),t=Object(o.a)(e,2),n=t[0],c=t[1],i=Object(I.b)();return Object(a.useEffect)((function(){return i(Rt(!0)),function(){i(Ut())}}),[]),Object(r.jsxs)(x.a,{position:"relative",height:"100%",children:[Object(r.jsx)(gt.a,{style:{position:"absolute",zIndex:"1000",width:"100%",boxShadow:"none",padding:"16px"},children:Object(r.jsx)(cn,{onFriendIdSelected:function(e){c(e)}})}),Object(r.jsx)(x.a,{children:Object(r.jsx)(Qt,{friendId:n,type:"temp"})})]})}function on(e){var t=e.children,n=Object(a.useState)(!0),i=Object(o.a)(n,1)[0],s=Object(k.i)(),u=Object(k.g)(),d=Object(a.useState)(null),l=Object(o.a)(d,2),f=l[0],j=l[1],p=Object(I.c)(Ze);Object(a.useEffect)((function(){var e=s.type,t=s.conversationId;if(e)switch(e){case"t":t||u.replace("/chat"),j("chat");break;case"new":t&&u.replace("/chat/new"),j("new")}else j("chat");return function(){}}),[s]);var b=Object(r.jsxs)(x.a,{className:"chat-box-wrapper",children:["chat"===f?Object(r.jsx)(Qt,{}):Object(r.jsx)(sn,{}),Object(r.jsx)("div",{style:{position:"absolute",bottom:"100px",left:"5px",width:"100%"},children:Object(r.jsx)($t,{})}),Object(r.jsx)(x.a,{display:"loading"===p?"none":"unset",children:Object(r.jsx)(Zt,{})})]});return Object(r.jsxs)(c.a.Fragment,{children:[" ",i?b:t," "]})}function un(e){var t=e.title;return Object(r.jsx)(v.a,{variant:"h5",children:t})}var dn=Object(B.c)({selectId:function(e){return e._id}}),ln=dn.getInitialState({status:"idle",error:null}),fn=Object(B.d)({name:"onlineUser",initialState:ln,reducers:{addAll:function(e,t){dn.addMany(e,t.payload)},removeOne:function(e,t){dn.removeOne(e,t.payload._id)},addOne:function(e,t){dn.addOne(e,t.payload)}}}),jn=dn.getSelectors((function(e){return e.onlineUser})),pn=jn.selectAll,bn=(jn.selectById,jn.selectIds,fn.actions),mn=bn.addAll,On=bn.addOne,hn=bn.removeOne,vn=fn.reducer,xn=Object(f.a)((function(e){return{root:{width:"100%"}}}));function gn(e){e.item;var t=xn(),n=Object(a.useState)(!1),c=Object(o.a)(n,2),i=(c[0],c[1],Object(I.c)(te)||{}),s=Object(I.c)(pn);Object(a.useEffect)((function(){}),[s]);var u=s.filter((function(e){return e.username!==i.username})).map((function(e){return Object(r.jsxs)(ct,{button:!0,component:Re.a,item:e,children:[Object(r.jsx)(He.a,{children:Object(r.jsx)(b,{online:!0,name:e.name,single:e.single,picture:e.picture})}),Object(r.jsx)(g.a,{smDown:!0,children:Object(r.jsx)(Ne.a,{primary:e.username})})]},e._id)})),d=Object(r.jsx)(v.a,{className:"text-muted",align:"center",children:"No online users"});return Object(r.jsxs)(x.a,{className:"online-users-wrapper",children:[Object(r.jsx)(x.a,{p:2,className:"title",children:Object(r.jsx)(un,{title:"Online"})}),Object(r.jsx)(Ie.a,{className:"".concat(t.root," online-users-list"),children:u.length>0?u:d})]})}function yn(){var e=Pe(),t=Object(a.useState)(0),n=Object(o.a)(t,2),c=n[0];n[1],"calc(100vh - ".concat(c,"px)");return Object(a.useEffect)((function(){}),[]),Object(r.jsx)(x.a,{className:"main-content",p:2,children:Object(r.jsxs)(Ae.a,{style:{height:"100%"},container:!0,children:[Object(r.jsx)(Ae.a,{style:{height:"100%",padding:0},item:!0,xs:3,className:"".concat(e.borderRight500),children:Object(r.jsx)(xt,{})}),Object(r.jsx)(Ae.a,{style:{height:"100%"},item:!0,xs:9,md:7,children:Object(r.jsx)(on,{children:"Loading..."})}),Object(r.jsx)(g.a,{smDown:!0,children:Object(r.jsx)(Ae.a,{style:{height:"100%",padding:0},item:!0,xs:!1,md:2,className:"".concat(e.borderLeft500," "),children:Object(r.jsx)(gn,{})})})]})})}var wn=n(453),Cn=n(117),_n=n.n(Cn),Sn=n(452),Fn=n(118),kn=n(43),qn={required:"{0} required",lengthGreater:"{0} must greater than {1} characters",noSpecialCharacter:"{0} must not contain special characters",unique:"{0} must be unique",match:"{0} must match"},In=Object(f.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function Rn(){var e=Object(I.b)(),t=Object(a.useState)(!1),n=Object(o.a)(t,2),c=n[0],i=n[1],s=Object(I.c)(ee),u=Object(oe.a)([Fe]),l=Object(o.a)(u,2),f=(l[0],l[1]),j=Object(I.c)(X),p=Object(I.c)(Q),b=In();if(c)"succeeded"===j&&p&&e(Gt({message:"Login unsuccessfully",type:"error",open:!0}));else if("loading"===j)return null;var m=Object(r.jsxs)(Sn.a,{component:"main",maxWidth:"xs",children:[Object(r.jsx)(wn.a,{}),Object(r.jsxs)("div",{className:b.paper,children:[Object(r.jsx)(d.a,{className:b.avatar,children:Object(r.jsx)(_n.a,{})}),Object(r.jsx)(v.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(r.jsx)(Fn.a,{initialValues:{username:"",password:"",passwordConfirmation:""},validationSchema:kn.a({username:kn.c().required(P.format(qn.required,"Username")),password:kn.c().required(P.format(qn.required,"Password"))}),onSubmit:function(){var t=Object(T.a)(N.a.mark((function t(n,r){var a,c,s;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r.setSubmitting,a=n.username,c=n.password,s={username:a,password:c},i(!0),e(Y(s)),f(Fe,s);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),children:function(e){var t=e.values,n=e.errors,a=e.touched,c=e.handleChange,i=e.handleBlur,s=e.handleSubmit,o=e.isSubmitting,u=e.isValid,d=e.dirty,l={};for(var f in n)l[f]=null!=n[f]&&a[f];var j=function(e,r){return{fullWidth:!0,margin:"normal",placeholder:r=r||P.ucFirst(e),variant:"outlined",name:e,onChange:c,onBlur:i,value:t[r],label:r,error:l[e],helperText:l[e]?n[e]:null}};return Object(r.jsxs)("form",{onSubmit:s,noValidate:!0,autoComplete:"off",children:[Object(r.jsx)(Ee.a,Object(ue.a)({autoFocus:!0,type:"text"},j("username"))),Object(r.jsx)(Ee.a,Object(ue.a)({type:"password"},j("password"))),Object(r.jsx)(x.a,{children:Object(r.jsx)(y.a,{disabled:o||!u||!d,type:"submit",fullWidth:!0,variant:"contained",color:"primary",children:" Sign In"})}),Object(r.jsx)(_e,{to:"/sign-up",children:Object(r.jsx)(v.a,{color:"primary",style:{cursor:"pointer"},children:"Create an account"})})]})}})]})]});return s?null:m}var Un=function(){var e=Object(T.a)(N.a.mark((function e(t){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,D.findByUsername(t);case 3:return n=e.sent,e.abrupt("return","succeeded"===n.status);case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Nn=function(e,t){return!!e&&e.length>=t},Tn=function(e){return!!e&&/^[a-zA-Z0-9]+$/.test(e)},Bn={username:function(e,t,n){var r="Username";return kn.c().required(P.format(qn.required,r)).test("length",P.format(qn.lengthGreater,r,4),(function(e,t){return Nn(e,4)})).test("specialCharacter",P.format(qn.noSpecialCharacter,r),(function(e,t){return Tn(e)})).test("usernameExist",P.format(qn.unique,r),function(){var r=Object(T.a)(N.a.mark((function r(a,c){return N.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!Nn(a,4)||!Tn(a)){r.next=6;break}if(a===e.value){r.next=6;break}if(clearTimeout(n),a){r.next=5;break}return r.abrupt("return",!0);case 5:return r.abrupt("return",new Promise((function(e,r){n=setTimeout(Object(T.a)(N.a.mark((function n(){var r;return N.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Un(a);case 2:r=n.sent,t({value:a,unique:!r}),e(!r);case 5:case"end":return n.stop()}}),n)}))),500)})));case 6:return r.abrupt("return",e.unique);case 7:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}())},password:function(){var e="Password";return kn.c().required(P.format(qn.required,e)).matches(/[a-zA-Z0-9]{3,}/,P.format(qn.lengthGreater,e))},passwordConfirmation:function(){var e="Password confirmation";return kn.c().required(P.format(qn.required,e)).oneOf([kn.b("password")],P.format(qn.match,e))}},Mn=Object(f.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)}}}));function An(){var e=Object(I.b)(),t=Object(a.useState)({value:"",unique:!1}),n=Object(o.a)(t,2),c=n[0],i=n[1],s=Object(I.c)(ee),u=Object(I.c)(X),l=Mn();return"loading"===u||s?null:Object(r.jsxs)(Sn.a,{component:"main",maxWidth:"xs",children:[Object(r.jsx)(wn.a,{}),Object(r.jsxs)("div",{className:l.paper,children:[Object(r.jsx)(d.a,{className:l.avatar,children:Object(r.jsx)(_n.a,{})}),Object(r.jsx)(v.a,{component:"h1",variant:"h5",children:"Sign Up"}),Object(r.jsx)(Fn.a,{initialValues:{username:"",password:"",passwordConfirmation:""},validationSchema:kn.a({username:Bn.username(c,i,undefined),password:Bn.password(),passwordConfirmation:Bn.passwordConfirmation()}),onSubmit:function(){var t=Object(T.a)(N.a.mark((function t(n,r){var a,c,i,s,o;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=r.setSubmitting,c=n.username,i=n.password,t.next=4,D.createAccount(c,i);case 4:"succeeded"===(s=t.sent).status?(o=s.payload,e(Gt({message:P.format(Yt.welcomeNewAccount,o.username)})),e(ce(o))):a(!1);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),children:function(e){var t=e.values,n=e.errors,a=e.touched,c=e.handleChange,i=e.handleBlur,s=e.handleSubmit,o=e.isSubmitting,u=e.isValid,d=e.dirty,l={};for(var f in n)l[f]=null!=n[f]&&a[f];var j=function(e,r){return{fullWidth:!0,margin:"normal",placeholder:r=r||P.ucFirst(e),variant:"outlined",name:e,onChange:c,onBlur:i,value:t[r],label:r,error:l[e],helperText:l[e]?n[e]:null}};return Object(r.jsxs)("form",{onSubmit:s,noValidate:!0,autoComplete:"off",children:[Object(r.jsx)(Ee.a,Object(ue.a)({type:"text"},j("username"))),Object(r.jsx)(Ee.a,Object(ue.a)({type:"password"},j("password"))),Object(r.jsx)(Ee.a,Object(ue.a)({type:"password"},j("passwordConfirmation","Password confirmation"))),Object(r.jsx)(x.a,{children:Object(r.jsx)(y.a,{disabled:o||!u||!d,type:"submit",fullWidth:!0,variant:"contained",color:"primary",children:" Sign Up "})}),Object(r.jsx)(_e,{to:"/signin",children:Object(r.jsx)(v.a,{color:"primary",style:{cursor:"pointer"},children:"Have an account?"})})]})}})]})]})}var En=n(468);function Ln(e){return Object(r.jsx)(en.a,Object(ue.a)({elevation:6,variant:"filled"},e))}var Dn=Object(f.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}}));function Pn(){var e=Dn(),t=Object(I.b)(),n=Object(I.c)(zt),a=Object(I.c)(Wt),c=Object(I.c)(Ht),i=Object(I.c)(Vt),s=function(e,n){"clickaway"!==n&&t(Gt({open:!1}))};return Object(r.jsx)("div",{className:e.root,children:a?Object(r.jsx)(En.a,{open:n,autoHideDuration:i,onClose:s,anchorOrigin:{horizontal:"right",vertical:"top"},message:a,children:""!==c?Object(r.jsx)(Ln,{onClose:s,severity:c,children:a}):null}):""})}function zn(e){var t=e.children,n=Object(ve.a)(e,["children"]),a=Object(I.c)(ee);return Object(r.jsx)(k.b,Object(ue.a)(Object(ue.a)({},n),{},{render:function(e){var n=e.location;return a?t:Object(r.jsx)(k.a,{to:{pathname:"/login",state:{from:n}}})}}))}var Wn,Hn=n(209),Vn=n(459),Gn=(n(388),n(462)),Jn=n(458),Yn=n(455),Kn=n(456),Zn=n(457),$n=Object(B.b)("friend/fetchFriends",function(){var e=Object(T.a)(N.a.mark((function e(t){var n,r,a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.type,r=t.ids,e.next=3,D.findUsersByIds(r);case 3:return a=e.sent,e.abrupt("return",{type:n,response:a});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Qn=Object(B.b)("friend/fetchFriends",function(){var e=Object(T.a)(N.a.mark((function e(t){var n,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,e.next=3,D.findStrangerByUsername(n);case 3:return r=e.sent,e.abrupt("return",{type:"stranger",response:r});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Xn=Object(B.c)({selectId:function(e){return e._id}}),er=Xn.getInitialState({status:"idle",error:null}),tr={friend:er,request:er,sent_request:er,stranger:er},nr=Object(B.d)({name:"friend",initialState:tr,reducers:{onAddFriend:function(e,t){var n=t.payload.user;Xn.removeOne(e.stranger,n._id),Xn.addOne(e.sent_request,n)},onUnFriend:function(e,t){var n=t.payload.user;Xn.removeOne(e.friend,n._id),Xn.addOne(e.stranger,n)},onCancelFriendRequest:function(e,t){var n=t.payload.user;Xn.removeOne(e.sent_request,n._id),Xn.addOne(e.stranger,n)},onRejectFriendRequest:function(e,t){var n=t.payload.user;Xn.removeOne(e.request,n._id),Xn.addOne(e.stranger,n)},onAcceptFriendRequest:function(e,t){var n=t.payload.user;Xn.removeOne(e.request,n._id),Xn.addOne(e.friend,n)},onFriendRequested:function(e,t){var n=t.payload.user;Xn.removeOne(e.stranger,n._id),Xn.addOne(e.request,n)},onFriendAccepted:function(e,t){var n=t.payload.user;Xn.removeOne(e.sent_request,n._id),Xn.addOne(e.friend,n)},onFriendUnfriend:function(e,t){var n=t.payload.user;Xn.removeOne(e.friend,n._id),Xn.addOne(e.stranger,n)},onFriendCanceled:function(e,t){var n=t.payload.user;Xn.removeOne(e.request,n._id),Xn.addOne(e.stranger,n)},onFriendRejected:function(e,t){var n=t.payload.user;Xn.removeOne(e.sent_request,n._id),Xn.addOne(e.stranger,n)}},extraReducers:(Wn={},Object(R.a)(Wn,$n.pending,(function(e,t){e[t.meta.arg.type].status="loading"})),Object(R.a)(Wn,$n.fulfilled,(function(e,t){var n=t.payload,r=n.type,a=n.response,c=a.payload,i=a.status,s=e[r];"succeeded"===i?(Xn.upsertMany(s,c),s.error=null):s.error="not found",s.status="succeeded"})),Object(R.a)(Wn,$n.rejected,(function(e,t){})),Wn)}),rr=function(e,t){return e.friend[t].status},ar=Xn.getSelectors((function(e){return e.friend.friend})),cr=ar.selectAll,ir=(ar.selectById,ar.selectIds,Xn.getSelectors((function(e){return e.friend.request}))),sr=ir.selectAll,or=(ir.selectById,ir.selectIds,Xn.getSelectors((function(e){return e.friend.sent_request}))),ur=or.selectAll,dr=(or.selectById,or.selectIds,Xn.getSelectors((function(e){return e.friend.stranger}))),lr=dr.selectAll,fr=(dr.selectById,dr.selectIds,nr.actions),jr=fr.onFriendRequested,pr=fr.onFriendAccepted,br=fr.onFriendCanceled,mr=fr.onFriendRejected,Or=fr.onFriendUnfriend,hr=fr.onAcceptFriendRequest,vr=fr.onAddFriend,xr=fr.onCancelFriendRequest,gr=fr.onRejectFriendRequest,yr=fr.onUnFriend,wr=nr.reducer;function Cr(e){var t=e.item,n=Object(I.b)(),a=Pe(),i=Object(I.c)(te),s=function(){var e=Object(T.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.cancelFriendRequest(i._id,t._id);case 2:"succeeded"===e.sent.status&&(J.emitCancelFriendRequest(i,t._id),n(xr({user:t})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsx)(c.a.Fragment,{children:Object(r.jsx)(y.a,{onClick:s,variant:"contained",size:"small",className:a.buttonStyle,children:"Cancel request"})})}function _r(e){var t=e.item,n=Object(I.b)(),a=Pe(),i=Object(I.c)(te),s=function(){var e=Object(T.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.confirmFriendRequest(i._id,t._id);case 2:"succeeded"===e.sent.status&&(J.emitAcceptFriend(i,t._id),n(hr({user:t})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o=function(){var e=Object(T.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.deleteFriendRequest(i._id,t._id);case 2:"succeeded"===e.sent.status&&(J.emitDeleteFriendRequest(i,t._id),n(gr({user:t})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)(c.a.Fragment,{children:[Object(r.jsx)(y.a,{onClick:s,color:"primary",variant:"contained",size:"small",className:a.buttonStyle,children:"Confirm"}),Object(r.jsx)(y.a,{onClick:o,variant:"contained",size:"small",className:a.buttonStyle,children:"Delete"})]})}function Sr(e){var t=e.item,n=Pe(),a=Object(I.c)(te),i=Object(I.b)(),s=function(){var e=Object(T.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.sentFriendRequest(a._id,t._id);case 2:"succeeded"===e.sent.status&&(J.emitAddFriend(a,t._id),i(vr({user:t})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsx)(c.a.Fragment,{children:Object(r.jsx)(y.a,{onClick:s,color:"primary",variant:"contained",size:"small",className:n.buttonStyle,children:"Add friend"})})}var Fr=n(210),kr=n(454),qr=n(140),Ir=n.n(qr);function Rr(e){var t=e.item,n=Object(I.b)(),c=Object(I.c)(te),i=Pe(),s=Object(a.useState)(null),u=Object(o.a)(s,2),d=u[0],l=u[1],f=Boolean(d),j=function(){var e=Object(T.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.unfriend(c._id,t._id);case 2:"succeeded"===e.sent.status&&(J.emitUnfriend(c,t._id),n(yr({user:t}))),l(null);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)("div",{children:[Object(r.jsx)(de.a,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:function(e){l(e.currentTarget)},children:Object(r.jsx)(Ir.a,{})}),Object(r.jsxs)(Fr.a,{id:"long-menu",anchorEl:d,keepMounted:!0,open:f,onClose:function(){l(null)},PaperProps:{style:{maxHeight:216,width:"20ch"}},children:[Object(r.jsx)(kr.a,{children:Object(r.jsx)(ct,{item:t,style:{width:"100%"},children:Object(r.jsx)(y.a,{onClick:function(){l(null)},variant:"contained",size:"small",fullWidth:!0,color:"primary",className:i.buttonStyle,children:"Chat"})})}),Object(r.jsx)(kr.a,{children:Object(r.jsx)(y.a,{onClick:j,variant:"contained",size:"small",fullWidth:!0,className:i.buttonStyle,children:"Unfriend"})})]})]})}function Ur(e){var t=e.items,n=e.type,a=e.isLoading,i=Object(I.c)(te),s=t.map((function(e,t){var a,c;c="friend"===(a=n||function(e,t){var n=e.friend,r=n.friend,a=n.request,c=n.sent_request;return r.indexOf(t)>-1?"friend":a.indexOf(t)>-1?"request":c.indexOf(t)>-1?"sent_request":"stranger"}(i,e._id))?Object(r.jsx)(Rr,{item:e}):"sent_request"===a?Object(r.jsx)(Cr,{item:e}):"request"===a?Object(r.jsx)(_r,{item:e}):Object(r.jsx)(Sr,{item:e});var s=Object(r.jsxs)(Yn.a,{style:{justifyContent:"flex-end"},children:[" ",c," "]});return Object(r.jsx)(Ae.a,{item:!0,xs:12,md:6,lg:4,children:Object(r.jsx)(Kn.a,{children:Object(r.jsx)(Zn.a,{avatar:Object(r.jsx)(b,{name:e.username,picture:e.picture,children:" "}),action:s,title:e.username,subheader:null})})},t)})),o=Object(r.jsx)(c.a.Fragment,{children:Object(r.jsx)(Ae.a,{item:!0,xs:12,children:a?Object(r.jsx)(Tt,{}):Object(r.jsx)(v.a,{align:"center",className:"text-muted",children:"Your list is empty"})})});return Object(r.jsx)(c.a.Fragment,{children:s.length>0?s:o})}var Nr=function(){var e="friend",t=Object(I.c)(cr),n=Object(I.c)(te),c=Object(I.c)((function(t){return rr(t,e)})),i=Object(I.b)();return Object(a.useEffect)((function(){"idle"===c&&i($n({type:e,ids:n.friend[e]}))}),[c,n.friend[e]]),Object(r.jsx)(Ur,{items:t,type:e,isLoading:"loading"===c})},Tr=function(){var e="sent_request",t=Object(I.c)(ur),n=Object(I.c)(te),c=Object(I.c)((function(t){return rr(t,e)})),i=Object(I.b)();return Object(a.useEffect)((function(){"idle"===c&&i($n({type:e,ids:n.friend[e]}))}),[c,n.friend[e]]),Object(r.jsx)(Ur,{items:t,type:e,isLoading:"loading"===c})},Br=function(){var e="request",t=Object(I.c)(sr),n=Object(I.c)(te),c=Object(I.c)((function(t){return rr(t,e)})),i=Object(I.b)();return Object(a.useEffect)((function(){"idle"===c&&i($n({type:e,ids:n.friend[e]}))}),[c,n.friend[e]]),Object(r.jsx)(Ur,{items:t,type:e,isLoading:"loading"===c})},Mr=function(e){var t=e.username,n="stranger",c=Object(I.c)(lr),i=Object(I.c)(te),s=Object(I.c)((function(e){return rr(e,n)})),o=Object(I.b)();return Object(a.useEffect)((function(){"idle"===s&&o(Qn({type:n,username:t}))}),[s,i.username]),Object(r.jsx)(Ur,{items:c,type:n,isLoading:"loading"===s})};function Ar(e){var t=e.type,n=null,a=Object(I.c)(ee),c=Object(I.c)(te);if(a)switch(t){case"friends_request":n=Object(r.jsx)(Br,{username:c.username});break;case"friends_sent_request":n=Object(r.jsx)(Tr,{username:c.username});break;case"people_may_know":n=Object(r.jsx)(Mr,{username:c.username});break;default:n=Object(r.jsx)(Nr,{username:c.username})}return Object(r.jsx)(Ae.a,{style:{paddingTop:"8px"},container:!0,spacing:2,children:n})}function Er(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}var Lr=["friends_all","friends_request","friends_sent_request","people_may_know"];function Dr(){Object(a.useEffect)((function(){var e=document.getElementsByTagName("body"),t=Object(o.a)(e,1)[0];return t.style.overflowY="scroll",function(){t.style.overflowY="hidden"}}),[]);Pe();var e=c.a.useState(0),t=Object(o.a)(e,2),n=t[0],i=t[1],s=Object(k.g)(),u=Object(k.i)();Object(a.useEffect)((function(){var e=u.friendsTab,t=Lr.indexOf(e);i(t=t<0?0:t)}),[u.friendsTab]);return Object(r.jsx)(x.a,{p:2,style:{height:"100%"},children:Object(r.jsxs)(Ae.a,{style:{height:"100%"},container:!0,spacing:2,children:[Object(r.jsxs)(Ae.a,{style:{height:"100%"},item:!0,xs:9,children:[Object(r.jsx)(un,{title:"Friends"}),Object(r.jsxs)(x.a,{mt:1,children:[Object(r.jsx)(O.a,{position:"static",color:"default",children:Object(r.jsxs)(Gn.a,{value:n,onChange:function(e,t){i(t);var n=Lr[t];s.push("/".concat(n))},"aria-label":"simple tabs example",indicatorColor:"primary",className:"my-tabs",scrollButtons:"auto",variant:"scrollable",children:[Object(r.jsx)(Jn.a,Object(ue.a)({label:"All Friends"},Er(0))),Object(r.jsx)(Jn.a,Object(ue.a)({label:"Friend Requests"},Er(1))),Object(r.jsx)(Jn.a,Object(ue.a)({label:"Sent Requests"},Er(2))),Object(r.jsx)(Jn.a,Object(ue.a)({label:"People you may know"},Er(3)))]})}),Object(r.jsx)(Ar,{type:Lr[n]})]})]}),Object(r.jsxs)(Ae.a,{style:{height:"100%"},item:!0,xs:3,children:[Object(r.jsx)(gn,{})," "]})]})})}function Pr(e){var t=Object.assign({},e),n=Object(I.c)(ee),c=Object(k.h)(),i=Object(k.g)();return Object(a.useEffect)((function(){if(n){var e=(c.state||{from:{pathname:"/"}}).from;i.replace(e)}}),[n,c.state,i]),Object(r.jsx)(k.b,Object(ue.a)({},t))}function zr(){var e=Object(oe.a)([Fe]),t=Object(o.a)(e,1)[0],n=Object(I.c)(te)||{},c=Object(I.c)(ee),i=Object(I.c)(Xe),s=Object(I.b)();Object(a.useEffect)((function(){c&&J.emitGetOnlineUsers()}),[c]),Object(a.useEffect)((function(){J.onOnlineUsers((function(e){s(mn(e))})),J.onNewOnlineUser((function(e){s(On(e))})),J.onOnlineUserLeft((function(e){s(hn(e))}));return J.onFriendAccepted((function(e){s(Gt({message:P.format(Yt.friendAccepted,e.user.username),type:"info",open:!0})),s(pr({user:e.user}))})),J.onFriendRequested((function(e){s(Gt({message:P.format(Yt.friendRequested,e.user.username),type:"info",open:!0})),s(jr({user:e.user}))})),J.onFriendUnFriend((function(e){s(Or({user:e.user}))})),J.onFriendRequestCanceled((function(e){s(br({user:e.user}))})),J.onFriendRejected((function(e){s(mr({user:e.user}))})),function(){J.off(G.onlineUserLeft),J.off(G.newOnlineUser),J.off(G.onlineUsers),J.off(G.friendAccepted),J.off(G.friendRequested),J.off(G.friendUnfriend),J.off(G.friendRequestCanceled),J.off(G.friendRejected)}}),[]),Object(a.useEffect)((function(){return J.onUpdateUser((function(e){s(ie(e))})),J.onNewMessageNotification((function(e){var t=e.message;e.conversationId!==i&&t.from._id!==n._id&&s(Gt({message:P.format(Yt.newMessage,t.from.username,t.text),type:"success",open:!0,timeout:2e3}))})),function(){J.off(G.updateUser),J.off(G.newMessageNotification)}}),[n._id,i]),Object(a.useEffect)((function(){t.loggedUser&&s(Y(t.loggedUser))}),[]);var u=Object(I.c)((function(e){return e.theme.type})),d=Object(Hn.a)({palette:{type:u}});return Object(r.jsx)(Vn.a,{theme:d,children:Object(r.jsx)(q.a,{base:"/",children:Object(r.jsx)(gt.a,{style:{boxShadow:"none"},children:Object(r.jsxs)(x.a,{className:"wrapper",children:[Object(r.jsx)(Me,{}),Object(r.jsxs)(k.d,{children:[Object(r.jsxs)(zn,{path:"/chat/:type(t|new)/:conversationId?",exact:!0,children:[" ",Object(r.jsx)(yn,{})," "]}),Object(r.jsxs)(zn,{path:"/:friendsTab(friends|friends_all|friends_request|friends_sent_request|people_may_know)",children:[Object(r.jsx)(Dr,{})," "]}),Object(r.jsx)(Pr,{path:"/login",exact:!0,component:Rn}),Object(r.jsx)(Pr,{path:"/sign-up",exact:!0,component:An}),Object(r.jsx)(k.a,{to:"/chat/new"})]}),Object(r.jsx)(Pn,{})]})})})})}var Wr=Object(B.a)({reducer:{chat:at,notify:Jt,auth:se,sidebarConversations:vt,newChat:Nt,friend:wr,theme:Oe,onlineUser:vn}});s.a.render(Object(r.jsxs)(I.a,{store:Wr,children:[" ",Object(r.jsx)(zr,{})," "]}),document.getElementById("root"))}},[[389,1,2]]]);
//# sourceMappingURL=main.9f10bc1a.chunk.js.map